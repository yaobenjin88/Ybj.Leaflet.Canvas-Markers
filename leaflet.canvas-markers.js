!function(t){var n={};function i(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=n,i.d=function(t,n,a){i.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,n){if(1&n&&(t=i(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var e in t)i.d(a,e,function(n){return t[n]}.bind(null,e));return a},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},i.p="",i(i.s=0)}([function(t,n,i){var a=i(1),e=i(3);window.L.CanvasIconLayer=e(L),window.rbush=a},function(t,n,i){"use strict";t.exports=e,t.exports.default=e;var a=i(2);function e(t,n){if(!(this instanceof e))return new e(t,n);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function o(t,n,i){if(!i)return n.indexOf(t);for(var a=0;a<n.length;a++)if(i(t,n[a]))return a;return-1}function r(t,n){s(t,0,t.children.length,n,t)}function s(t,n,i,a,e){e||(e=f(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var o,r=n;r<i;r++)o=t.children[r],h(e,t.leaf?a(o):o);return e}function h(t,n){return t.minX=Math.min(t.minX,n.minX),t.minY=Math.min(t.minY,n.minY),t.maxX=Math.max(t.maxX,n.maxX),t.maxY=Math.max(t.maxY,n.maxY),t}function l(t,n){return t.minX-n.minX}function c(t,n){return t.minY-n.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,n){return t.minX<=n.minX&&t.minY<=n.minY&&n.maxX<=t.maxX&&n.maxY<=t.maxY}function _(t,n){return n.minX<=t.maxX&&n.minY<=t.maxY&&n.maxX>=t.minX&&n.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(t,n,i,e,o){for(var r,s=[n,i];s.length;)(i=s.pop())-(n=s.pop())<=e||(r=n+Math.ceil((i-n)/e/2)*e,a(t,r,n,i,o),s.push(n,r,r,i))}e.prototype={all:function(){return this._all(this.data,[])},search:function(t){var n=this.data,i=[],a=this.toBBox;if(!_(t,n))return i;for(var e,o,r,s,h=[];n;){for(e=0,o=n.children.length;e<o;e++)r=n.children[e],_(t,s=n.leaf?a(r):r)&&(n.leaf?i.push(r):d(t,s)?this._all(r,i):h.push(r));n=h.pop()}return i},collides:function(t){var n=this.data,i=this.toBBox;if(!_(t,n))return!1;for(var a,e,o,r,s=[];n;){for(a=0,e=n.children.length;a<e;a++)if(o=n.children[a],_(t,r=n.leaf?i(o):o)){if(n.leaf||d(t,r))return!0;s.push(o)}n=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var n=0,i=t.length;n<i;n++)this.insert(t[n]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var e=this.data;this.data=a,a=e}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(t,n){if(!t)return this;for(var i,a,e,r,s=this.data,h=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),a=l[l.length-1],i=c.pop(),r=!0),s.leaf&&-1!==(e=o(t,s.children,n)))return s.children.splice(e,1),l.push(s),this._condense(l),this;r||s.leaf||!d(s,h)?a?(i++,s=a.children[i],r=!1):s=null:(l.push(s),c.push(i),i=0,a=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,n){for(var i=[];t;)t.leaf?n.push.apply(n,t.children):i.push.apply(i,t.children),t=i.pop();return n},_build:function(t,n,i,a){var e,o=i-n+1,s=this._maxEntries;if(o<=s)return r(e=f(t.slice(n,i+1)),this.toBBox),e;a||(a=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,a-1))),(e=f([])).leaf=!1,e.height=a;var h,l,c,u,m=Math.ceil(o/s),d=m*Math.ceil(Math.sqrt(s));for(p(t,n,i,d,this.compareMinX),h=n;h<=i;h+=d)for(p(t,h,c=Math.min(h+d-1,i),m,this.compareMinY),l=h;l<=c;l+=m)u=Math.min(l+m-1,c),e.children.push(this._build(t,l,u,a-1));return r(e,this.toBBox),e},_chooseSubtree:function(t,n,i,a){for(var e,o,r,s,h,l,c,m,d,_;a.push(n),!n.leaf&&a.length-1!==i;){for(c=m=1/0,e=0,o=n.children.length;e<o;e++)h=u(r=n.children[e]),d=t,_=r,(l=(Math.max(_.maxX,d.maxX)-Math.min(_.minX,d.minX))*(Math.max(_.maxY,d.maxY)-Math.min(_.minY,d.minY))-h)<m?(m=l,c=h<c?h:c,s=r):l===m&&h<c&&(c=h,s=r);n=s||n.children[0]}return n},_insert:function(t,n,i){var a=this.toBBox,e=i?t:a(t),o=[],r=this._chooseSubtree(e,this.data,n,o);for(r.children.push(t),h(r,e);n>=0&&o[n].children.length>this._maxEntries;)this._split(o,n),n--;this._adjustParentBBoxes(e,o,n)},_split:function(t,n){var i=t[n],a=i.children.length,e=this._minEntries;this._chooseSplitAxis(i,e,a);var o=this._chooseSplitIndex(i,e,a),s=f(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,r(i,this.toBBox),r(s,this.toBBox),n?t[n-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,n){this.data=f([t,n]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(t,n,i){var a,e,o,r,h,l,c,m,d,_,f,p,x,v;for(l=c=1/0,a=n;a<=i-n;a++)e=s(t,0,a,this.toBBox),o=s(t,a,i,this.toBBox),d=e,_=o,void 0,void 0,void 0,void 0,f=Math.max(d.minX,_.minX),p=Math.max(d.minY,_.minY),x=Math.min(d.maxX,_.maxX),v=Math.min(d.maxY,_.maxY),r=Math.max(0,x-f)*Math.max(0,v-p),h=u(e)+u(o),r<l?(l=r,m=a,c=h<c?h:c):r===l&&h<c&&(c=h,m=a);return m},_chooseSplitAxis:function(t,n,i){var a=t.leaf?this.compareMinX:l,e=t.leaf?this.compareMinY:c;this._allDistMargin(t,n,i,a)<this._allDistMargin(t,n,i,e)&&t.children.sort(a)},_allDistMargin:function(t,n,i,a){t.children.sort(a);var e,o,r=this.toBBox,l=s(t,0,n,r),c=s(t,i-n,i,r),u=m(l)+m(c);for(e=n;e<i-n;e++)o=t.children[e],h(l,t.leaf?r(o):o),u+=m(l);for(e=i-n-1;e>=n;e--)o=t.children[e],h(c,t.leaf?r(o):o),u+=m(c);return u},_adjustParentBBoxes:function(t,n,i){for(var a=i;a>=0;a--)h(n[a],t)},_condense:function(t){for(var n,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():r(t[i],this.toBBox)},_initFormat:function(t){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(t[0])),this.compareMinY=new Function("a","b",n.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,n,i){t.exports=function(){"use strict";function t(t,n,i){var a=t[n];t[n]=t[i],t[i]=a}function n(t,n){return t<n?-1:t>n?1:0}return function(i,a,e,o,r){!function n(i,a,e,o,r){for(;o>e;){if(o-e>600){var s=o-e+1,h=a-e+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(h-s/2<0?-1:1),m=Math.max(e,Math.floor(a-h*c/s+u)),d=Math.min(o,Math.floor(a+(s-h)*c/s+u));n(i,a,m,d,r)}var _=i[a],f=e,p=o;for(t(i,e,a),r(i[o],_)>0&&t(i,e,o);f<p;){for(t(i,f,p),f++,p--;r(i[f],_)<0;)f++;for(;r(i[p],_)>0;)p--}0===r(i[e],_)?t(i,e,p):t(i,++p,o),p<=a&&(e=p+1),a<=p&&(o=p-1)}}(i,a,e||0,o||i.length-1,r||n)}}()},function(t,n,i){"use strict";t.exports=function(t){var n=(t.Layer?t.Layer:t.Class).extend({options:{showTextMaxCount:200,zIndexOffset:1e3},initialize:function(n){t.setOptions(this,n),this._showCount=0,this._onClickListeners=[],this._onHoverListeners=[]},setOptions:function(n){return t.setOptions(this,n),this.redraw()},redraw:function(){this._redraw(!0)},_moveMarker:function(t){if(!t.latlng.equals(t.oldLatLng)){var n={minX:t.oldLatLng.lng,minY:t.oldLatLng.lat,maxX:t.oldLatLng.lng,maxY:t.oldLatLng.lat,data:t.sourceTarget};this._latlngMarkers.remove(n,function(t,n){return t.data._leaflet_id===n.data._leaflet_id});var i={minX:t.latlng.lng,minY:t.latlng.lat,maxX:t.latlng.lng,maxY:t.latlng.lat,data:t.sourceTarget};this._latlngMarkers.insert(i)}},addMarkers:function(t){var n=this,i=[],a=[];t.forEach(function(t){if(t.on("move",n._moveMarker,n),"markerPane"==t.options.pane&&t.options.icon){var e=t.getLatLng(),o=n._map.getBounds().contains(e),r=n._addMarker(t,e,o);!0===o&&i.push(r[0]),a.push(r[1])}else console.error("Layer isn't a marker")}),n._markers.load(i),n._latlngMarkers.load(a)},addMarker:function(t){t.on("move",this._moveMarker,this);var n=t.getLatLng(),i=this._map.getBounds().contains(n),a=this._addMarker(t,n,i);!0===i&&this._markers.insert(a[0]),this._latlngMarkers.insert(a[1])},addLayer:function(t){"markerPane"==t.options.pane&&t.options.icon?this.addMarker(t):console.error("Layer isn't a marker")},addLayers:function(t){this.addMarkers(t)},removeLayer:function(t){this.removeMarker(t,!0)},removeMarker:function(t,n){var i=this;t.minX&&(t=t.data);var a=t.getLatLng(),e=i._map.getBounds().contains(a),o={minX:a.lng,minY:a.lat,maxX:a.lng,maxY:a.lat,data:t};i._latlngMarkers.remove(o,function(t,n){return t.data._leaflet_id===n.data._leaflet_id&&(n.data.off("move",i._moveMarker,i),!0)}),i._latlngMarkers.total--,i._latlngMarkers.dirty++,!0===e&&!0===n&&i._redraw(!0)},onAdd:function(n){if(this._map=n,!this._divCanvas){this._divCanvas=t.DomUtil.create("div","leaflet-layer");var i=this._map.getSize();this._divCanvas.style="padding: 0px;margin: 0px;",this._divCanvas.width=i.x,this._divCanvas.height=i.y}this._canvas||this._initCanvas(),this.options.pane?(this._divCanvas.appendChild(this._canvas),this.getPane().appendChild(this._divCanvas)):(this._divCanvas.appendChild(this._canvas),n._panes.overlayPane.appendChild(this._divCanvas)),n.on("move",this._reset,this),n.on("moveend",this._reset,this),n.on("resize",this._reset,this),n.on("click",this._executeListeners,this),n.on("mousemove",this._executeListeners,this),n._zoomAnimated&&n.on("zoomanim",this._animateZoom,this)},onRemove:function(t){this.options.pane?(this._divCanvas.removeChild(this._canvas),this.getPane().removeChild(this._divCanvas)):(this._divCanvas.removeChild(this._canvas),t.getPanes().overlayPane.removeChild(this._divCanvas)),t.off("click",this._executeListeners,this),t.off("mousemove",this._executeListeners,this),t.off("move",this._reset,this),t.off("moveend",this._reset,this),t.off("resize",this._reset,this),t._zoomAnimated&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},clearLayers:function(){var t=this;t._latlngMarkers&&t._latlngMarkers.dirty/t._latlngMarkers.total>=.1&&t._latlngMarkers.all().forEach(function(n){n.data.off("move",t._moveMarker,t)}),t._latlngMarkers=null,t._markers=null,t._redraw(!0)},_animateZoom:function(n){var i=this._map.getZoomScale(n.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._map.getBounds(),n.zoom,n.center).min;t.DomUtil.setTransform(this._canvas,a,i)},_addMarker:function(n,i,a){n._map=this._map,this._markers||(this._markers=new rbush),this._latlngMarkers||(this._latlngMarkers=new rbush,this._latlngMarkers.dirty=0,this._latlngMarkers.total=0),t.Util.stamp(n);var e=this._map.latLngToContainerPoint(i),o=n.options.icon.options.iconSize,r=o[0]/2,s=o[1]/2,h=[{minX:e.x-r,minY:e.y-s,maxX:e.x+r,maxY:e.y+s,data:n},{minX:i.lng,minY:i.lat,maxX:i.lng,maxY:i.lat,data:n}];return this._latlngMarkers.dirty++,this._latlngMarkers.total++,!0===a&&this._drawMarker(n,e),h},_drawMarker:function(t,n){var i=this;this._imageLookup||(this._imageLookup={}),n||(n=i._map.latLngToContainerPoint(t.getLatLng()));var a=t.options.icon.options.iconUrl;if(i._imageLookup[a])if(t.canvas_img=i._imageLookup[a][0],!1===i._imageLookup[a][1]){var e=i._imageLookup[a][2].findIndex(function(n){return n[0]._leaflet_id==t._leaflet_id});-1==e?i._imageLookup[a][2].push([t,n]):i._imageLookup[a][2].splice(e,1,[t,n])}else i._drawImage(t,n),i._drawText(t,n);else{var o=new Image;o.src=a,t.canvas_img=o,i._imageLookup[a]=[o,!1,[[t,n]]],o.onload=function(){i._imageLookup[a][1]=!0,i._imageLookup[a][2].forEach(function(t){i._drawImage(t[0],t[1]),i._drawText(t[0],t[1])})}}},_drawImage:function(t,n){var i,a,e,o,r,s,h,l=t.options.icon.options;i=l.iconSize[0],a=l.iconSize[1],l.statusColor?(e=i/2,o=(a+l.statusSize[1]+l.statusAnchor[1])/2):(e=i/2,o=a/2),r=n.x-l.iconAnchor[0],s=n.y-l.iconAnchor[1],this._context.save(),this._context.translate(r+e,s+o),this._context.rotate(Math.PI/180*l.iconRotate),this._context.translate(-e,-o),l.statusColor?(this._context.fillStyle=l.statusColor,this._context.fillRect(l.statusAnchor[0],l.statusAnchor[1],l.statusSize[0],l.statusSize[1]),h=l.statusSize[1]+l.statusAnchor[1]):h=0,l.iconRotate%360<=180?this._context.drawImage(t.canvas_img,0,h,i,a):(this._context.translate(this._canvas.width,0),this._context.scale(-1,1),this._context.drawImage(t.canvas_img,this._canvas.width-i,h,i,a),this._context.translate(this._canvas.width,0),this._context.scale(-1,1)),this._context.restore()},_drawText:function(t,n){var i=t.options.icon.options;this._showCount<=this.options.showTextMaxCount&&(i.text&&(this._context.font=i.textFont,this._context.fillStyle=i.textFillStyle,this._context.shadowOffsetX=i.shadowOffsetX,this._context.shadowOffsetY=i.shadowOffsetY,this._context.shadowBlur=i.shadowBlur,this._context.shadowColor=i.shadowColor,this._context.fillText(i.text,n.x-i.textAnchor[0],n.y-i.textAnchor[1])),i.text2&&(this._context.font=i.textFont,this._context.fillStyle=i.textFillStyle,this._context.shadowOffsetX=i.shadowOffsetX,this._context.shadowOffsetY=i.shadowOffsetY,this._context.shadowBlur=i.shadowBlur,this._context.shadowColor=i.shadowColor,this._context.fillText(i.text2,n.x-i.textAnchor[0],n.y-i.textAnchor[1]+14)))},_reset:function(){var n=this._map.containerPointToLayerPoint([0,0]);t.DomUtil.setPosition(this._canvas,n);var i=this._map.getSize();this._canvas.width=i.x,this._canvas.height=i.y,this._redraw()},_redraw:function(t){var n=this;if(t&&this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._map&&this._latlngMarkers){var i=[];n._latlngMarkers.dirty/n._latlngMarkers.total>=.1&&(n._latlngMarkers.all().forEach(function(t){i.push(t)}),n._latlngMarkers.clear(),n._latlngMarkers.load(i),n._latlngMarkers.dirty=0,i=[]);var a=n._map.getBounds(),e={minX:a.getWest(),minY:a.getSouth(),maxX:a.getEast(),maxY:a.getNorth()},o=[];n._showCount=0,n._latlngMarkers.search(e).forEach(function(t){var a=n._map.latLngToContainerPoint(t.data.getLatLng()),e=t.data.options.icon.options.iconSize,r=e[0]/2,s=e[1]/2,h={minX:a.x-r,minY:a.y-s,maxX:a.x+r,maxY:a.y+s,data:t.data};i.push(h),o.push({data:t.data,pos:a}),n._showCount++}),o.forEach(function(t){n._drawMarker(t.data,t.pos)}),this._markers.clear(),this._markers.load(i)}},_initCanvas:function(){this._canvas=t.DomUtil.create("canvas","leaflet-canvas-icon-layer leaflet-layer");var n=this._map.getSize();this._canvas.width=n.x,this._canvas.height=n.y,this._canvas.style="z-index: 1000;pointer-events: none;",this._context=this._canvas.getContext("2d");var i=this._map.options.zoomAnimation&&t.Browser.any3d;t.DomUtil.addClass(this._canvas,"leaflet-zoom-"+(i?"animated":"hide"))},addOnClickListener:function(t){this._onClickListeners.push(t)},addOnHoverListener:function(t){this._onHoverListeners.push(t)},_executeListeners:function(t){if(this._markers){var n=this,i=t.containerPoint.x,a=t.containerPoint.y;n._openToolTip&&(n._openToolTip.closeTooltip(),delete n._openToolTip);var e=this._markers.search({minX:i,minY:a,maxX:i,maxY:a});e&&e.length>0?(n._map._container.style.cursor="pointer","click"===t.type&&(e[0].data.getPopup()&&e[0].data.openPopup(),n._onClickListeners.forEach(function(n){n(t,e)})),"mousemove"===t.type&&(e[0].data.getTooltip()&&(n._openToolTip=e[0].data,e[0].data.openTooltip()),n._onHoverListeners.forEach(function(n){n(t,e)}))):n._map._container.style.cursor=""}}});t.canvasIconLayer=function(t){return new n(t)}}}]);